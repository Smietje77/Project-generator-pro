---
interface Props {
  isOpen?: boolean;
  title: string;
  class?: string;
}

const {
  isOpen = false,
  title,
  class: className = ''
} = Astro.props;
---

<div
  x-data="{ open: false }"
  x-show="open"
  @keydown.escape.window="open = false"
  class="fixed inset-0 z-50 overflow-y-auto"
  style="display: none;"
>
  <!-- Backdrop -->
  <div
    x-show="open"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    @click="open = false"
    class="fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm"
  ></div>

  <!-- Modal Content -->
  <div class="flex min-h-screen items-center justify-center p-4">
    <div
      x-show="open"
      x-transition:enter="transition ease-out duration-300"
      x-transition:enter-start="opacity-0 transform scale-95"
      x-transition:enter-end="opacity-100 transform scale-100"
      x-transition:leave="transition ease-in duration-200"
      x-transition:leave-start="opacity-100 transform scale-100"
      x-transition:leave-end="opacity-0 transform scale-95"
      @click.stop
      class={`relative bg-white rounded-lg shadow-xl max-w-md w-full ${className}`}
    >
      <!-- Header -->
      <div class="flex items-center justify-between p-6 border-b border-gray-200">
        <h3 class="text-xl font-semibold text-gray-900">{title}</h3>
        <button
          @click="open = false"
          class="text-gray-400 hover:text-gray-600 transition-colors"
          aria-label="Close modal"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Body -->
      <div class="p-6">
        <slot />
      </div>

      <!-- Footer -->
      <div class="px-6 py-4 bg-gray-50 rounded-b-lg border-t border-gray-200">
        <slot name="footer" />
      </div>
    </div>
  </div>
</div>
